<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><style type="text/css">body,html{width:100%;height:100%;margin:0;padding:0;display:flex;justify-content:center;align-items:center;background-color:grey}canvas{background-color:#000;max-width:600px;max-height:450px;margin:0 3px}@media only screen and (max-width:450px){canvas{width:100%;height:100%;max-height:800px}}</style></head><body><canvas height="450" width="600px"></canvas><script type="text/javascript">!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=2)}([function(t,e,i){"use strict";var n,r="object"==typeof Reflect?Reflect:null,s=r&&"function"==typeof r.apply?r.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)};n=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var o=Number.isNaN||function(t){return t!=t};function h(){h.init.call(this)}t.exports=h,h.EventEmitter=h,h.prototype._events=void 0,h.prototype._eventsCount=0,h.prototype._maxListeners=void 0;var a=10;function u(t){return void 0===t._maxListeners?h.defaultMaxListeners:t._maxListeners}function c(t,e,i,n){var r,s,o,h;if("function"!=typeof i)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof i);if(void 0===(s=t._events)?(s=t._events=Object.create(null),t._eventsCount=0):(void 0!==s.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),s=t._events),o=s[e]),void 0===o)o=s[e]=i,++t._eventsCount;else if("function"==typeof o?o=s[e]=n?[i,o]:[o,i]:n?o.unshift(i):o.push(i),(r=u(t))>0&&o.length>r&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,h=a,console&&console.warn&&console.warn(h)}return t}function l(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,s(this.listener,this.target,t))}function d(t,e,i){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},r=l.bind(n);return r.listener=i,n.wrapFn=r,r}function f(t,e,i){var n=t._events;if(void 0===n)return[];var r=n[e];return void 0===r?[]:"function"==typeof r?i?[r.listener||r]:[r]:i?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(r):y(r,r.length)}function p(t){var e=this._events;if(void 0!==e){var i=e[t];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function y(t,e){for(var i=new Array(e),n=0;n<e;++n)i[n]=t[n];return i}Object.defineProperty(h,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");a=t}}),h.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},h.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},h.prototype.getMaxListeners=function(){return u(this)},h.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var n="error"===t,r=this._events;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var h=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw h.context=o,h}var a=r[t];if(void 0===a)return!1;if("function"==typeof a)s(a,this,e);else{var u=a.length,c=y(a,u);for(i=0;i<u;++i)s(c[i],this,e)}return!0},h.prototype.addListener=function(t,e){return c(this,t,e,!1)},h.prototype.on=h.prototype.addListener,h.prototype.prependListener=function(t,e){return c(this,t,e,!0)},h.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.on(t,d(this,t,e)),this},h.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.prependListener(t,d(this,t,e)),this},h.prototype.removeListener=function(t,e){var i,n,r,s,o;if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);if(void 0===(n=this._events))return this;if(void 0===(i=n[t]))return this;if(i===e||i.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(r=-1,s=i.length-1;s>=0;s--)if(i[s]===e||i[s].listener===e){o=i[s].listener,r=s;break}if(r<0)return this;0===r?i.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(i,r),1===i.length&&(n[t]=i[0]),void 0!==n.removeListener&&this.emit("removeListener",t,o||e)}return this},h.prototype.off=h.prototype.removeListener,h.prototype.removeAllListeners=function(t){var e,i,n;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[t]),this;if(0===arguments.length){var r,s=Object.keys(i);for(n=0;n<s.length;++n)"removeListener"!==(r=s[n])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},h.prototype.listeners=function(t){return f(this,t,!0)},h.prototype.rawListeners=function(t){return f(this,t,!1)},h.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):p.call(t,e)},h.prototype.listenerCount=p,h.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(t,e,i){},function(t,e,i){"use strict";i.r(e);let n,r,s={};function o(t,e){s[t]=s[t]||[],s[t].push(e)}function h(t,...e){s[t]&&s[t].map(t=>t(...e))}function a(){return n}function u(){return r}function c(t){if(!(n=document.getElementById(t)||t||document.querySelector("canvas")))throw Error("You must provide a canvas element for the game");return(r=n.getContext("2d")).imageSmoothingEnabled=!1,h("init"),{canvas:n,context:r}}class l{constructor({spriteSheet:t,frames:e,frameRate:i,loop:n=!0}={}){this.spriteSheet=t,this.frames=e,this.frameRate=i,this.loop=n;let{width:r,height:s,margin:o=0}=t.frame;this.width=r,this.height=s,this.margin=o,this._f=0,this._a=0}clone(){return d(this)}reset(){this._f=0,this._a=0}update(t=1/60){if(this.loop||this._f!=this.frames.length-1)for(this._a+=t;this._a*this.frameRate>=1;)this._f=++this._f%this.frames.length,this._a-=1/this.frameRate}render({x:t,y:e,width:i=this.width,height:n=this.height,context:r=u()}={}){let s=this.frames[this._f]/this.spriteSheet._f|0,o=this.frames[this._f]%this.spriteSheet._f|0;r.drawImage(this.spriteSheet.image,o*this.width+(2*o+1)*this.margin,s*this.height+(2*s+1)*this.margin,this.width,this.height,t,e,i,n)}}function d(t){return new l(t)}d.prototype=l.prototype,d.class=l;let f=/(jpeg|jpg|gif|png)$/,p=/(wav|mp3|ogg|aac)$/,y=/^\//,g=/\/$/,m=new WeakMap,v="",w="",x="";function _(t,e){return new URL(t,e).href}function b(t,e){return[t.replace(g,""),t?e.replace(y,""):e].filter(t=>t).join("/")}function L(t){return t.split(".").pop()}function j(t){let e=t.replace("."+L(t),"");return 2==e.split("/").length?e.replace(y,""):e}let A={},E={},O={};function S(){window.__k||(window.__k={dm:m,u:_,d:O,i:A})}function M(t){v=t}function T(t){w=t}function C(t){return S(),new Promise((e,i)=>{let n,r,s;if(n=b(v,t),A[n])return e(A[n]);(r=new Image).onload=function(){s=_(n,window.location.href),A[j(t)]=A[n]=A[s]=this,h("assetLoaded",this,t),e(this)},r.onerror=function(){i("Unable to load image "+n)},r.src=n})}function P(t){return new Promise((e,i)=>{let n,r,s,o;return n=new Audio,r=function(t){return{wav:"",mp3:t.canPlayType("audio/mpeg;"),ogg:t.canPlayType('audio/ogg; codecs="vorbis"'),aac:t.canPlayType("audio/aac;")}}(n),(t=[].concat(t).reduce((t,e)=>t||(r[L(e)]?e:null),0))?(s=b(w,t),E[s]?e(E[s]):(n.addEventListener("canplay",(function(){o=_(s,window.location.href),E[j(t)]=E[s]=E[o]=this,h("assetLoaded",this,t),e(this)})),n.onerror=function(){i("Unable to load audio "+s)},n.src=s,void n.load())):i("cannot play any of the audio formats provided"+t)})}function R(t){let e,i;return S(),e=b(x,t),O[e]?Promise.resolve(O[e]):fetch(e).then(t=>{if(!t.ok)throw t;return t.clone().json().catch(()=>t.text())}).then(n=>(i=_(e,window.location.href),"object"==typeof n&&m.set(n,i),O[j(t)]=O[e]=O[i]=n,h("assetLoaded",n,t),n))}function z(...t){return S(),Promise.all(t.map(t=>{let e=L([].concat(t)[0]);return e.match(f)?C(t):e.match(p)?P(t):R(t)}))}const F=()=>{};function k(){let t=a();u().clearRect(0,0,t.width,t.height)}function q({fps:t=60,clearCanvas:e=!0,update:i,render:n}={}){if(!i||!n)throw Error("You must provide update() and render() functions");let r,s,o,a,u,c=0,l=1e3/t,d=1/t,f=e?k:F;function p(){if(s=requestAnimationFrame(p),o=performance.now(),a=o-r,r=o,!(a>1e3)){for(h("tick"),c+=a;c>=l;)u.update(d),c-=l;f(),u.render()}}return u={update:i,render:n,isStopped:!0,start(){r=performance.now(),this.isStopped=!1,requestAnimationFrame(p)},stop(){this.isStopped=!0,cancelAnimationFrame(s)},_frame:p,set _last(t){r=t}}}let D={},N={},W={Enter:"enter",Escape:"esc",Space:"space",ArrowLeft:"left",ArrowUp:"up",ArrowRight:"right",ArrowDown:"down",13:"enter",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down"};function Y(t){let e=W[t.code||t.which];N[e]=!0,D[e]&&D[e](t)}function $(t){N[W[t.code||t.which]]=!1}function I(){N={}}function U(){let t;for(t=0;t<26;t++)W[t+65]=W["Key"+String.fromCharCode(t+65)]=String.fromCharCode(t+97);for(t=0;t<10;t++)W[48+t]=W["Digit"+t]=""+t;window.addEventListener("keydown",Y),window.addEventListener("keyup",$),window.addEventListener("blur",I)}function X(t){return!!N[t]}let K=[],B=[],H={},G={},J={0:"left",1:"middle",2:"right"},Q={x:0,y:0,radius:5};function V(t){let e=t.x,i=t.y;t.anchor&&(e-=t.width*t.anchor.x,i-=t.height*t.anchor.y);let n=Q.x-Math.max(e,Math.min(Q.x,e+t.width)),r=Q.y-Math.max(i,Math.min(Q.y,i+t.height));return n*n+r*r<Q.radius*Q.radius}function Z(){let t,e,i=B.length?B:K;for(let n=i.length-1;n>=0;n--)if(e=(t=i[n]).collidesWithPointer?t.collidesWithPointer(Q):V(t))return t}function tt(t){let e=void 0!==t.button?J[t.button]:"left";G[e]=!0,rt(t,"onDown")}function et(t){let e=void 0!==t.button?J[t.button]:"left";G[e]=!1,rt(t,"onUp")}function it(t){rt(t,"onOver")}function nt(){G={}}function rt(t,e){let i,n,r=a();if(!r)return;-1!==["touchstart","touchmove","touchend"].indexOf(t.type)?(i=(t.touches[0]||t.changedTouches[0]).clientX,n=(t.touches[0]||t.changedTouches[0]).clientY):(i=t.clientX,n=t.clientY);let s=r.height/r.offsetHeight,o=r.getBoundingClientRect(),h=(i-o.left)*s,u=(n-o.top)*s;Q.x=h,Q.y=u,t.preventDefault();let c=Z();c&&c[e]&&c[e](t),H[e]&&H[e](t,c)}function st(){let t=a();t.addEventListener("mousedown",tt),t.addEventListener("touchstart",tt),t.addEventListener("mouseup",et),t.addEventListener("touchend",et),t.addEventListener("blur",nt),t.addEventListener("mousemove",it),t.addEventListener("touchmove",it),o("tick",()=>{B.length=0,K.map(t=>{B.push(t)}),K.length=0})}class ot{constructor({create:t,maxSize:e=1024}={}){let i;if(!t||!(i=t())||!(i.update&&i.init&&i.isAlive))throw Error("Must provide create() function which returns an object with init(), update(), and isAlive() functions");this._c=t,this.objects=[t()],this.size=0,this.maxSize=e}get(t={}){if(this.size===this.objects.length){if(this.size===this.maxSize)return;for(let t=0;t<this.size&&this.objects.length<this.maxSize;t++)this.objects.push(this._c())}let e=this.objects[this.size];return this.size++,e.init(t),e}getAliveObjects(){return this.objects.slice(0,this.size)}clear(){this.size=this.objects.length=0,this.objects.push(this._c())}update(t){let e,i=!1;for(let n=this.size;n--;)(e=this.objects[n]).update(t),e.isAlive()||(i=!0,this.size--);i&&this.objects.sort((t,e)=>e.isAlive()-t.isAlive())}render(){for(let t=this.size;t--;)this.objects[t].render()}}function ht(t){return new ot(t)}function at(t,e){let i=[],n=e.x+e.width/2,r=e.y+e.height/2,s=t.y<r&&t.y+t.height>=e.y,o=t.y+t.height>=r&&t.y<e.y+e.height;return t.x<n&&t.x+t.width>=e.x&&(s&&i.push(0),o&&i.push(2)),t.x+t.width>=n&&t.x<e.x+e.width&&(s&&i.push(1),o&&i.push(3)),i}ht.prototype=ot.prototype,ht.class=ot;class ut{constructor({maxDepth:t=3,maxObjects:e=25,bounds:i}={}){this.maxDepth=t,this.maxObjects=e;let n=a();this.bounds=i||{x:0,y:0,width:n.width,height:n.height},this._b=!1,this._d=0,this._o=[],this._s=[],this._p=null}clear(){this._s.map((function(t){t.clear()})),this._b=!1,this._o.length=0}get(t){let e,i,n=new Set;for(;this._s.length&&this._b;){for(e=at(t,this.bounds),i=0;i<e.length;i++)this._s[e[i]].get(t).forEach(t=>n.add(t));return Array.from(n)}return this._o.filter(e=>e!==t)}add(){let t,e,i,n;for(e=0;e<arguments.length;e++)if(i=arguments[e],Array.isArray(i))this.add.apply(this,i);else if(this._b)this._a(i);else if(this._o.push(i),this._o.length>this.maxObjects&&this._d<this.maxDepth){for(this._sp(),t=0;n=this._o[t];t++)this._a(n);this._o.length=0}}_a(t,e,i){for(e=at(t,this.bounds),i=0;i<e.length;i++)this._s[e[i]].add(t)}_sp(t,e,i){if(this._b=!0,!this._s.length)for(t=this.bounds.width/2|0,e=this.bounds.height/2|0,i=0;i<4;i++)this._s[i]=ct({bounds:{x:this.bounds.x+(i%2==1?t:0),y:this.bounds.y+(i>=2?e:0),width:t,height:e},maxDepth:this.maxDepth,maxObjects:this.maxObjects}),this._s[i]._d=this._d+1,this._s[i]._p=this}}function ct(t){return new ut(t)}ct.prototype=ut.prototype,ct.class=ut;class lt{constructor(t=0,e=0){this._x=t,this._y=e}add(t,e=1){return dt(this.x+(t.x||0)*e,this.y+(t.y||0)*e,this)}clamp(t,e,i,n){this._c=!0,this._a=t,this._b=e,this._d=i,this._e=n}get x(){return this._x}get y(){return this._y}set x(t){this._x=this._c?Math.min(Math.max(this._a,t),this._d):t}set y(t){this._y=this._c?Math.min(Math.max(this._b,t),this._e):t}}function dt(t,e,i={}){let n=new lt(t,e);return i._c&&(n.clamp(i._a,i._b,i._d,i._e),n.x=t,n.y=e),n}dt.prototype=lt.prototype,dt.class=lt;class ft{constructor(t){this.init(t)}init(t={}){let{x:e,y:i,dx:n,dy:r,ddx:s,ddy:o,width:h,height:a,image:c}=t;this.position=dt(e,i),this.velocity=dt(n,r),this.acceleration=dt(s,o),this._fx=this._fy=1,this.width=this.height=this.rotation=0,this.ttl=1/0,this.anchor={x:0,y:0},this.context=u();for(let e in t)this[e]=t[e];c&&(this.width=void 0!==h?h:c.width,this.height=void 0!==a?a:c.height),this.sx=0,this.sy=0}get x(){return this.position.x}get y(){return this.position.y}get dx(){return this.velocity.x}get dy(){return this.velocity.y}get ddx(){return this.acceleration.x}get ddy(){return this.acceleration.y}get animations(){return this._a}get viewX(){return this.x-this.sx}get viewY(){return this.y-this.sy}get width(){return this._w}get height(){return this._h}set x(t){this.position.x=t}set y(t){this.position.y=t}set dx(t){this.velocity.x=t}set dy(t){this.velocity.y=t}set ddx(t){this.acceleration.x=t}set ddy(t){this.acceleration.y=t}set animations(t){let e,i;for(e in this._a={},t)this._a[e]=t[e].clone(),i=i||this._a[e];this.currentAnimation=i,this.width=this.width||i.width,this.height=this.height||i.height}set viewX(t){}set viewY(t){}set width(t){let e=t<0?-1:1;this._fx=e,this._w=t*e}set height(t){let e=t<0?-1:1;this._fy=e,this._h=t*e}isAlive(){return this.ttl>0}collidesWith(t){if(this.rotation||t.rotation)return null;let e=this.x-this.width*this.anchor.x,i=this.y-this.height*this.anchor.y,n=t.x,r=t.y;return t.anchor&&(n-=t.width*t.anchor.x,r-=t.height*t.anchor.y),e<n+t.width&&e+this.width>n&&i<r+t.height&&i+this.height>r}update(t){this.advance(t)}render(){this.draw()}playAnimation(t){this.currentAnimation=this.animations[t],this.currentAnimation.loop||this.currentAnimation.reset()}advance(t){this.velocity=this.velocity.add(this.acceleration,t),this.position=this.position.add(this.velocity,t),this.ttl--,this.currentAnimation&&this.currentAnimation.update(t)}draw(){let t=-this.width*this.anchor.x,e=-this.height*this.anchor.y;if(this.context.save(),this.context.translate(this.viewX,this.viewY),this.rotation&&this.context.rotate(this.rotation),-1==this._fx||-1==this._fy){let i=this.width/2+t,n=this.height/2+e;this.context.translate(i,n),this.context.scale(this._fx,this._fy),this.context.translate(-i,-n)}this.image?this.context.drawImage(this.image,0,0,this.image.width,this.image.height,t,e,this.width,this.height):this.currentAnimation?this.currentAnimation.render({x:t,y:e,width:this.width,height:this.height,context:this.context}):(this.context.fillStyle=this.color,this.context.fillRect(t,e,this.width,this.height)),this.context.restore()}}function pt(t){return new ft(t)}function yt(t){if(+t===t)return t;let e=[],i=t.split(".."),n=+i[0],r=+i[1],s=n;if(n<r)for(;s<=r;s++)e.push(s);else for(;s>=r;s--)e.push(s);return e}pt.prototype=ft.prototype,pt.class=ft;class gt{constructor({image:t,frameWidth:e,frameHeight:i,frameMargin:n,animations:r}={}){if(!t)throw Error("You must provide an Image for the SpriteSheet");this.animations={},this.image=t,this.frame={width:e,height:i,margin:n},this._f=t.width/e|0,this.createAnimations(r)}createAnimations(t){let e,i;for(i in t){let{frames:n,frameRate:r,loop:s}=t[i];if(e=[],void 0===n)throw Error("Animation "+i+" must provide a frames property");[].concat(n).map(t=>{e=e.concat(yt(t))}),this.animations[i]=d({spriteSheet:this,frames:e,frameRate:r,loop:s})}}}function mt(t){return new gt(t)}mt.prototype=gt.prototype,mt.class=gt;var vt=(t,e,i)=>{let n,r;t.fillStyle="white",t.font="10px Courier New",n=e.x>i.width/2?-35:10,r=e.y<25?20:0,t.fillText(`x:${Math.floor(e.x)}`,e.x+n,e.y+r),t.fillText(`y:${Math.floor(e.y)}`,e.x+n,e.y-10+r)};var wt=t=>{X("left")?t.dx=-t.speed:X("right")?t.dx=t.speed:t.dx>0?(t.dx-=.08,t.dx<.1&&(t.dx=0)):t.dx<0&&(t.dx+=.08,t.dx>.1&&(t.dx=0)),X("up")?t.dy=-t.speed:X("down")?t.dy=t.speed:t.dy>0?(t.dy-=.08,t.dy<.1&&(t.dy=0)):t.dy<0&&(t.dy+=.08,t.dy>.1&&(t.dy=0))};var xt=(t,e,i)=>{let n=i[0];X("z")&&(t.gunStatus=!t.gunStatus),X("x")&&e.getAliveObjects().length<2&&(n.play(),n.onplaying=()=>{e.get({x:t.x+t.width/2,y:t.y,color:t.gunStatus?"green":"red",bulletType:t.gunStatus,width:5,anchor:{x:.5,y:.5},height:20,dy:-4,ttl:1/0})},console.log(n.getOwnPropertyNames)),e.getAliveObjects().forEach(t=>{t.y<=0&&(t.ttl=0)})};var _t=(t,e,i,n,r)=>{r||(r=10),t.fillStyle="white",t.font=`${r}px Courier New`,t.fillText(n,e,i)};var bt=(t,e,i,n)=>{e.get({x:Math.floor(Math.random()*i.width),y:0,question:t.question,questionType:t.answer,color:"blue",width:30,height:20,anchor:{x:.5,y:.5},dx:0,dy:2,ttl:1/0});let r=e.getAliveObjects(),s=r[r.length-1];r.forEach(t=>{t.position.clamp(0+t.width/2,0+t.height/2,i.width-t.width/2,i.height+t.height/2),s.y>=i.height-s.height/2&&(t.y=0,t.x=Math.floor(Math.random()*i.width),t.dy<5&&(t.dy+=.5,t.dy>2&&(t.dx=Math.floor(-3*Math.random())+2)))})};var Lt=(t,e,i,n)=>{let r=[],s=[];r=e.getAliveObjects(),s=t.getAliveObjects();const o=n[1];if(s.length)for(let t,e=0;t=s[e];e++)t.collidesWith(i);if(r.length)for(let t,e=0;t=r[e];e++)for(let e,i=0;e=s[i];i++)t.collidesWith(e)&&(t.ttl=0,t.bulletType===e.questionType&&(e.ttl=0,o.play()))};i(0);let jt;M("src/app/assets/sprites"),T("src/app/assets/sfx"),z("redship.png","Explosion.ogg","Laser.ogg").then(()=>{const{canvas:t,context:e}=c();st(),U();let i=!1,n=pt({x:t.width/2-30,y:400,color:"brown",width:60,height:60,speed:2.5,image:A.redship,gunStatus:!0});n.position.clamp(0,t.height/2+n.height,t.width-n.width,t.height-n.height);let r=0;const s=ht({create:pt,size:1,maxSize:2});let o=0,h=ht({create:pt,size:1,maxSize:2});q({update:function(){if(wt(n),n.update(),++r>=15&&(xt(n,s,[E.Laser,E.Explosion]),r=0),s.update(),++o>=60){bt([{question:"(2)",answer:!0},{question:"(2 + 1 > 3)",answer:!1}][0],h,t,[E.Laser,E.Explosion]),o=0}h.update(),jt=h.getAliveObjects(),Lt(h,s,n,[E.Laser,E.Explosion]);let e=!1;X("d")&&!e&&(e=!0,i=!i)},render:function(){n.render(),s.render(),h.render(),jt&&jt.map(t=>{_t(e,t.x-17.5,t.y+t.height-14,t.question,20)}),i&&(vt(e,Q,t),_t(e,20,20,`dx: ${n.dx.toFixed(2)}`,20),_t(e,20,40,`dy: ${n.dy.toFixed(2)}`,20))}}).start()});i(1)}]);</script></body></html>